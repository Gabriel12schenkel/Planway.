<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planejamento - Impulso Empreendedor</title>
    <!-- Link para a fonte Inter do Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Estilos CSS globais e espec√≠ficos da p√°gina */
        :root {
            --cor-principal: rgb(144, 238, 144); /* Verde Claro */
            --cor-principal-claro: rgb(180, 255, 180);
            --cor-texto-escuro: #333;
            --cor-texto-claro: #f0f0f0;
            --cor-fundo-claro: #ffffff;
            --cor-fundo-escuro: #f7f7f7;
            --sombra-card: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transicao-suave: all 0.3s ease-in-out;
        }

        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            background-color: var(--cor-fundo-escuro);
            color: var(--cor-texto-escuro);
            line-height: 1.6;
            scroll-behavior: smooth;
        }

        /* Estrutura principal da aplica√ß√£o */
        #root {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Se√ß√£o de cabe√ßalho (Header) */
        .header {
            background-color: var(--cor-principal-claro); /* Mais verde aqui */
            padding: 1.5rem 1rem;
            box-shadow: var(--sombra-card);
            text-align: center;
            border-bottom: 3px solid var(--cor-principal); /* Mais verde aqui */
        }

        .header h1 {
            font-size: 2.5rem;
            color: var(--cor-texto-claro); /* Texto branco */
            margin: 0;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1); /* Destaque no texto */
        }

        .header p {
            font-size: 1.1rem;
            color: var(--cor-texto-escuro);
            margin-top: 0.5rem;
        }

        /* Layout principal do conte√∫do - sidebar e √°rea principal */
        .main-content {
            flex-grow: 1;
            display: flex;
            padding: 2rem 1rem;
            gap: 2rem;
            max-width: 1400px; /* Aumenta um pouco para acomodar bem */
            margin: 0 auto;
            width: 100%;
            border: 1px solid var(--cor-principal-claro); /* Borda verde clara */
            border-radius: 12px;
            box-shadow: var(--sombra-card);
        }

        /* Sidebar de planos salvos */
        .plan-list-sidebar {
            background-color: var(--cor-fundo-claro);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: var(--sombra-card);
            width: 300px; /* Largura fixa para a sidebar */
            flex-shrink: 0; /* N√£o encolhe */
            overflow-y: auto; /* Permite rolagem se muitos planos */
            max-height: calc(100vh - 100px); /* Ajusta altura para n√£o sair da tela */
        }

        .plan-list-sidebar h2 {
            font-size: 1.8rem;
            color: var(--cor-principal);
            margin-top: 0;
            margin-bottom: 1.5rem;
            text-align: center;
            font-weight: 600;
        }

        .plan-list-sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .plan-list-sidebar li {
            background-color: var(--cor-fundo-escuro);
            padding: 0.8rem 1rem;
            border-radius: 8px;
            margin-bottom: 0.7rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1rem;
            font-weight: 500;
            color: var(--cor-texto-escuro);
            cursor: pointer;
            transition: var(--transicao-suave);
            border: 1px solid transparent;
        }

        .plan-list-sidebar li:hover {
            background-color: var(--cor-principal-claro);
            border-color: var(--cor-principal);
            transform: translateX(5px);
        }

        .plan-list-sidebar li.selected {
            background-color: var(--cor-principal);
            color: var(--cor-texto-claro);
            border-left: 5px solid var(--cor-principal); /* Mais verde aqui */
            font-weight: 600;
        }

        .plan-list-sidebar li button {
            background: none;
            border: none;
            color: #ff6666; /* Cor para o bot√£o de exclus√£o */
            font-size: 1.2rem;
            cursor: pointer;
            margin-left: 0.5rem;
            transition: color 0.3s ease;
        }

        .plan-list-sidebar li button:hover {
            color: #cc0000;
        }

        /* √Årea principal de planejamento */
        .planning-main-area {
            flex-grow: 1; /* Ocupa o espa√ßo restante */
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        /* Estilo comum para se√ß√µes da √°rea principal */
        .planning-section {
            background-color: var(--cor-fundo-claro);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--sombra-card);
        }

        .planning-section h2 {
            font-size: 2rem;
            color: var(--cor-principal);
            margin-top: 0;
            padding-bottom: 1rem;
            margin-bottom: 1.5rem;
            font-weight: 700;
            text-align: center;
            border-bottom: 2px solid var(--cor-principal-claro); /* Mais verde aqui */
        }

        /* Editor de Plano de Neg√≥cios */
        .business-plan-editor .form-group {
            margin-bottom: 1.5rem;
        }

        .business-plan-editor label {
            display: block;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--cor-texto-escuro);
            font-weight: 600;
        }

        .business-plan-editor input[type="text"],
        .business-plan-editor textarea,
        .planning-section input[type="number"],
        .detailed-sector-analysis-section select { /* Inclui input number e select para nova se√ß√£o */
            width: calc(100% - 20px); /* Ajusta largura para padding */
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            resize: vertical; /* Permite redimensionar verticalmente */
            box-sizing: border-box; /* Inclui padding na largura total */
            transition: border-color 0.3s ease;
        }

        .business-plan-editor input[type="text"]:focus,
        .business-plan-editor textarea:focus,
        .planning-section input[type="number"]:focus,
        .detailed-sector-analysis-section select:focus { /* Inclui input number e select para nova se√ß√£o */
            outline: none;
            border-color: var(--cor-principal);
            box-shadow: 0 0 0 3px rgba(144, 238, 144, 0.5);
        }

        .business-plan-editor textarea {
            min-height: 100px;
        }

        .editor-buttons {
            display: flex;
            gap: 1rem;
            justify-content: flex-end; /* Alinha bot√µes √† direita */
            margin-top: 2rem;
        }

        .editor-buttons button {
            background-color: var(--cor-principal);
            color: var(--cor-texto-escuro);
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transicao-suave);
            box-shadow: var(--sombra-card);
        }

        .editor-buttons button:hover {
            background-color: var(--cor-principal-claro);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        /* Bot√£o Salvar com estilo prim√°rio */
        .editor-buttons #savePlanBtn {
            background-color: var(--cor-principal);
            color: var(--cor-texto-escuro);
        }
        .editor-buttons #savePlanBtn:hover {
            background-color: var(--cor-principal-claro);
        }

        /* Bot√£o de exclus√£o com estilo de alerta */
        .editor-buttons #deletePlanBtn {
            background-color: #ff6666; /* Vermelho suave */
            color: var(--cor-texto-claro);
        }
        .editor-buttons #deletePlanBtn:hover {
            background-color: #cc0000; /* Vermelho mais forte */
        }

        /* Bot√µes menores para a se√ß√£o de faturamento */
        .editor-buttons-small {
            background-color: var(--cor-principal);
            color: var(--cor-texto-escuro);
            padding: 0.6rem 1.2rem;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transicao-suave);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-top: 1rem; /* Espa√ßamento para o bot√£o "Atualizar Dados" */
            width: fit-content;
        }
        .editor-buttons-small:hover {
            background-color: var(--cor-principal-claro);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }


        /* Nova se√ß√£o: Metas e Faturamento (Revenue Tracking) */
        .revenue-tracking-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minminmax(280px, 1fr)); /* Min para flexibilidade */
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .revenue-tracking-section .input-group,
        .revenue-tracking-section .info-box {
            background-color: var(--cor-fundo-escuro);
            padding: 1rem 1.5rem;
            border-radius: 10px;
            border: 1px solid var(--cor-principal-claro);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .revenue-tracking-section label {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--cor-texto-escuro);
            display: block;
            margin-bottom: 0.5rem;
        }

        .revenue-tracking-section input[type="number"] {
            width: calc(100% - 20px);
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            box-sizing: border-box;
        }

        .revenue-tracking-section .info-box p {
            margin: 0;
            font-size: 0.95rem;
            color: var(--cor-texto-escuro);
        }

        .revenue-tracking-section .info-box strong {
            color: var(--cor-principal);
            font-size: 1.1rem;
        }

        .growth {
            color: green;
            font-weight: 700;
        }
        .decline {
            color: red;
            font-weight: 700;
        }
        .neutral {
            color: orange;
            font-weight: 700;
        }
        .goal-met {
            color: green;
            font-weight: 700;
        }
        .goal-not-met {
            color: red;
            font-weight: 700;
        }


        /* An√°lise de Mercado */
        .market-analysis-section .chart-placeholder {
            width: 100%;
            height: 300px;
            background-color: var(--cor-fundo-escuro);
            border: 2px dashed var(--cor-principal);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--cor-principal);
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            text-align: center;
            padding: 1rem;
        }

        .market-analysis-section h3 {
            font-size: 1.5rem;
            color: var(--cor-texto-escuro);
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .market-analysis-section ul {
            list-style: disc;
            padding-left: 20px;
            margin-bottom: 1.5rem;
        }

        .market-analysis-section ul li {
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .sector-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5rem;
            text-align: left;
        }

        .sector-table th, .sector-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }

        .sector-table th {
            background-color: var(--cor-principal);
            color: var(--cor-texto-escuro);
            font-weight: 700;
            border-radius: 8px 8px 0 0; /* Arredonda cantos da tabela */
        }

        .sector-table tr:nth-child(even) {
            background-color: var(--cor-fundo-escuro);
        }

        .sector-table tr:last-child td {
            border-bottom: none;
        }

        /* Nova se√ß√£o de An√°lise de Concorr√™ncia */
        .competition-analysis-section {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px dashed var(--cor-principal-claro); /* Separador visual */
        }

        .competition-analysis-section .form-group {
            margin-bottom: 1.5rem;
        }

        .competition-analysis-section label {
            display: block;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--cor-texto-escuro);
            font-weight: 600;
        }

        .competition-analysis-section textarea {
            width: calc(100% - 20px);
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            resize: vertical;
            box-sizing: border-box;
            min-height: 120px;
        }

        .competition-info {
            background-color: var(--cor-fundo-escuro);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            border: 1px solid var(--cor-principal); /* Borda verde */
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Nova se√ß√£o de Produtos Campe√µes */
        .champion-products-section {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px dashed var(--cor-principal-claro);
        }

        .champion-product-card {
            background-color: var(--cor-fundo-claro);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: var(--sombra-card);
            border: 1px solid var(--cor-principal); /* Mais verde aqui */
            transition: var(--transicao-suave);
        }

        .champion-product-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .champion-product-card h4 {
            color: var(--cor-principal);
            font-size: 1.25rem;
            margin-top: 0;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .champion-product-card p {
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
        }

        .champion-product-card span {
            font-size: 0.85rem;
            color: #666;
        }

        /* Nova se√ß√£o de Informa√ß√µes Importantes */
        .important-info-section {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px dashed var(--cor-principal-claro);
        }

        .info-list {
            list-style: none;
            padding: 0;
        }

        .info-list li {
            background-color: var(--cor-fundo-escuro);
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border: 1px solid var(--cor-principal-claro);
            font-size: 1rem;
        }

        .info-list li strong {
            color: var(--cor-principal);
        }

        /* Nova se√ß√£o: An√°lise Detalhada por Setor */
        .detailed-sector-analysis-section {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px dashed var(--cor-principal-claro);
        }

        .detailed-sector-analysis-section select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            background-color: var(--cor-fundo-claro);
            color: var(--cor-texto-escuro);
            transition: border-color 0.3s ease;
        }

        .detailed-sector-analysis-section select:focus {
            outline: none;
            border-color: var(--cor-principal);
            box-shadow: 0 0 0 3px rgba(144, 238, 144, 0.5);
        }

        .sector-details-box {
            background-color: var(--cor-fundo-escuro);
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border: 1px solid var(--cor-principal); /* Destaque com borda verde */
            min-height: 150px;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .sector-details-box h4 {
            color: var(--cor-principal);
            font-size: 1.2rem;
            margin-top: 0;
            margin-bottom: 0.8rem;
            font-weight: 600;
        }
        .sector-details-box ul {
            list-style: disc;
            padding-left: 20px;
            margin-bottom: 1rem;
        }


        /* Avalia√ß√£o do Plano */
        .plan-evaluation-section {
            text-align: center;
        }

        .plan-evaluation-section button {
            background-color: var(--cor-principal);
            color: var(--cor-texto-escuro);
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transicao-suave);
            box-shadow: var(--sombra-card);
        }

        .plan-evaluation-section button:hover {
            background-color: var(--cor-principal-claro);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        #evaluationResult {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background-color: var(--cor-fundo-escuro);
            border-radius: 10px;
            border: 1px solid var(--cor-principal);
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            color: var(--cor-texto-escuro);
            text-align: left;
        }

        /* Rodap√© (Footer) */
        .footer {
            background-color: var(--cor-texto-escuro);
            color: var(--cor-texto-claro);
            text-align: center;
            padding: 2rem 1rem;
            font-size: 0.9rem;
            margin-top: auto; /* Garante que o footer fique no final da p√°gina */
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
        }

        /* Mensagem flutuante (para feedback de usu√°rio) */
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.4);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            font-weight: 500;
        }
        .message-box.show {
            opacity: 1;
            transform: translate(-50%, -50%);
        }

        /* Media Queries para Responsividade */
        @media (max-width: 1024px) {
            .main-content {
                flex-direction: column;
                padding: 1.5rem 0.5rem;
            }
            .plan-list-sidebar {
                width: 100%;
                max-height: 300px; /* Limita altura em telas menores */
            }
            .editor-buttons {
                flex-direction: column;
                align-items: stretch;
            }
            .editor-buttons button {
                width: 100%;
            }
            .revenue-tracking-section {
                grid-template-columns: 1fr; /* Uma coluna em telas menores */
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            .header p {
                font-size: 1rem;
            }
            .planning-section h2 {
                font-size: 1.8rem;
            }
            .plan-list-sidebar h2 {
                font-size: 1.6rem;
            }
            .business-plan-editor label,
            .market-analysis-section h3,
            .plan-evaluation-section button {
                font-size: 1rem;
            }
            .business-plan-editor input[type="text"],
            .business-plan-editor textarea,
            .plan-list-sidebar li,
            .revenue-tracking-section input[type="number"],
            .detailed-sector-analysis-section select {
                font-size: 0.95rem;
            }
            .revenue-tracking-section label {
                font-size: 0.9rem;
            }
            .revenue-tracking-section .info-box p {
                font-size: 0.9rem;
            }
            .revenue-tracking-section .info-box strong {
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8rem;
            }
            .header p {
                font-size: 0.9rem;
            }
            .main-content {
                padding: 1rem 0.5rem;
            }
            .planning-section {
                padding: 1.5rem;
            }
            .planning-section h2 {
                font-size: 1.6rem;
            }
            .plan-list-sidebar {
                padding: 1rem;
            }
            .plan-list-sidebar h2 {
                font-size: 1.4rem;
            }
            .editor-buttons button {
                padding: 0.7rem 1rem;
            }
        }
    </style>
  <nav style="
    background: linear-gradient(90deg, rgb(144, 238, 144), rgb(34, 139, 34));
    padding: 15px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
">
  <ul style="
      display: flex;
      justify-content: center;
      margin: 0;
      padding: 0;
      list-style: none;
      gap: 30px;
  ">
    <li><a href="/inicio" style="text-decoration: none; color: white; font-weight: bold; font-size: 16px;">In√≠cio</a></li>
    <li><a href="/planejamento" style="text-decoration: none; color: white; font-weight: bold; font-size: 16px;">Planejamento</a></li>
    <li><a href="/financeiro" style="text-decoration: none; color: white; font-weight: bold; font-size: 16px;">Financeiro</a></li>
    <li><a href="/marketing" style="text-decoration: none; color: white; font-weight: bold; font-size: 16px;">Marketing</a></li>
    <li><a href="/seja-socio" style="text-decoration: none; color: white; font-weight: bold; font-size: 16px;">Seja S√≥cio</a></li>
    <li><a href="/fornecedor" style="text-decoration: none; color: white; font-weight: bold; font-size: 16px;">Fornecedores</a></li>
  </ul>
</nav>




</head>
<body>
    <div id="root">
        <!-- Cabe√ßalho Principal -->
        <header class="header">
            <h1>Impulso Empreendedor</h1>
            <p>Seu guia para estruturar, crescer e tomar decis√µes inteligentes.</p>
        </header>

        <!-- Se√ß√£o Principal de Conte√∫do -->
        <main class="main-content">
            <!-- Coluna Lateral com Planos Salvos -->
            <aside class="plan-list-sidebar">
                <h2>Meus Planos</h2>
                <ul id="planList">
                    <!-- Planos ser√£o carregados aqui pelo JavaScript -->
                    <li class="new-plan-item" onclick="createNewPlan()">
                        <span class="new-plan-text">+ Novo Plano</span>
                    </li>
                </ul>
            </aside>

            <!-- √Årea Principal de Planejamento -->
            <section class="planning-main-area">
                <!-- Nova se√ß√£o: Metas e Faturamento (Revenue Tracking) -->
                <div id="revenueTrackingSection" class="planning-section">
                    <h2>Metas e Faturamento Mensal</h2>
                    <div class="revenue-tracking-section">
                        <div class="input-group">
                            <label for="monthlyGoal">Meta de Faturamento (M√™s Atual):</label>
                            <input type="number" id="monthlyGoal" placeholder="Ex: 5000" min="0">
                        </div>
                        <div class="input-group">
                            <label for="currentMonthRevenue">Faturamento do M√™s Atual:</label>
                            <input type="number" id="currentMonthRevenue" placeholder="Ex: 4800" min="0">
                        </div>
                        <div class="info-box">
                            <p>Faturamento do M√™s Passado:</p>
                            <p><strong><span id="lastMonthRevenueDisplay">R$ 0,00</span></strong></p>
                        </div>
                        <div class="info-box">
                            <p>Crescimento/Queda:</p>
                            <p><strong id="growthOrDeclineDisplay">N/A</strong></p>
                        </div>
                        <div class="info-box">
                            <p>Meta Batida?</p>
                            <p><strong id="goalMetDisplay">N/A</strong></p>
                        </div>
                        <div class="input-group">
                            <button id="updateRevenueBtn" class="editor-buttons-small">Atualizar Dados</button>
                            <button id="generateReportBtn" class="editor-buttons-small">Gerar Relat√≥rio</button>
                        </div>
                    </div>
                </div>

                <!-- Editor de Plano de Neg√≥cios -->
                <div id="businessPlanEditor" class="planning-section business-plan-editor">
                    <h2>Editor de Plano de Neg√≥cio</h2>
                    <div class="form-group">
                        <label for="planName">Nome do Plano:</label>
                        <input type="text" id="planName" placeholder="Ex: Plano de Neg√≥cio Startup X" required>
                    </div>
                    <div class="form-group">
                        <label for="objective">Objetivo:</label>
                        <textarea id="objective" placeholder="Qual o prop√≥sito principal do seu neg√≥cio? Onde voc√™ quer chegar?"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="strategy">Estrat√©gia:</label>
                        <textarea id="strategy" placeholder="Como voc√™ vai alcan√ßar seus objetivos? Quais s√£o os passos e m√©todos?"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="metrics">M√©tricas:</label>
                        <textarea id="metrics" placeholder="Como voc√™ vai medir o sucesso? Quais s√£o os indicadores chave de performance (KPIs)?"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="goals">Metas:</label>
                        <textarea id="goals" placeholder="Quais s√£o as metas espec√≠ficas, mensur√°veis, ating√≠veis, relevantes e com prazo definido (SMART)?"></textarea>
                    </div>
                    <div class="editor-buttons">
                        <button id="savePlanBtn">Salvar Plano</button>
                        <button id="newPlanBtn">Limpar Editor</button>
                        <button id="deletePlanBtn" style="display:none;">Excluir Plano</button>
                        <button id="exportPdfBtn">Exportar PDF</button>
                    </div>
                </div>

                <!-- An√°lise de Mercado Interativa -->
                <div class="planning-section market-analysis-section">
                    <h2>An√°lise de Mercado</h2>
                    <p>Explore as tend√™ncias do mercado e identifique oportunidades para o seu neg√≥cio.</p>

                    <div class="chart-placeholder">
                        <span>Gr√°fico ou Tabela de Setores (simulado)</span>
                    </div>

                    <h3>Setores em Destaque:</h3>
                    <table class="sector-table">
                        <thead>
                            <tr>
                                <th>Setor</th>
                                <th>Situa√ß√£o</th>
                                <th>Tend√™ncia</th>
                            </tr>
                        </thead>
                        <tbody id="sectorDataTable">
                            <!-- Dados de setores ser√£o carregados aqui pelo JavaScript -->
                        </tbody>
                    </table>

                    <!-- Nova se√ß√£o: An√°lise Detalhada por Setor -->
                    <div class="detailed-sector-analysis-section">
                        <h3>An√°lise Detalhada por Setor</h3>
                        <div class="form-group">
                            <label for="sectorSelect">Selecione um Setor para An√°lise:</label>
                            <select id="sectorSelect">
                                <option value="">Selecione um setor...</option>
                                <!-- Options will be populated by JS -->
                            </select>
                        </div>
                        <div id="selectedSectorDetails" class="sector-details-box">
                            <p>Selecione um setor acima para ver sua an√°lise detalhada.</p>
                        </div>
                    </div>


                    <!-- Nova se√ß√£o: An√°lise de Concorr√™ncia -->
                    <div class="competition-analysis-section">
                        <h3>An√°lise de Concorr√™ncia</h3>
                        <div class="form-group">
                            <label for="competitors">Descreva seus principais concorrentes diretos e indiretos:</label>
                            <textarea id="competitors" placeholder="Ex: Empresa A (pre√ßo baixo), Empresa B (inova√ß√£o), Empresa C (nicho espec√≠fico)"></textarea>
                        </div>
                        <div class="competition-info">
                            <p><strong>N√≠vel de Concorr√™ncia Simulada:</strong> <span id="simulatedCompetitionLevel">M√©dia</span></p>
                            <p><strong>Dicas para se Destacar:</strong>
                                <ul id="competitionTips">
                                    <!-- Dicas de concorr√™ncia ser√£o carregadas aqui -->
                                </ul>
                            </p>
                        </div>
                    </div>

                    <!-- Nova se√ß√£o: Produtos Campe√µes em Nichos -->
                    <div class="champion-products-section">
                        <h3>Produtos Campe√µes em Nichos</h3>
                        <p>Descubra exemplos de produtos de sucesso em diferentes setores e inspire-se para o seu neg√≥cio.</p>
                        <div id="championProductsList">
                            <!-- Produtos campe√µes ser√£o carregados aqui -->
                        </div>
                    </div>

                    <!-- Informa√ß√µes Importantes para o Empreendedor -->
                    <div class="important-info-section">
                        <h3>Recursos e Informa√ß√µes Essenciais</h3>
                        <ul class="info-list" id="essentialInfoList">
                            <!-- Informa√ß√µes essenciais ser√£o carregadas aqui -->
                        </ul>
                    </div>

                    <h3>Dicas para o Sucesso:</h3>
                    <ul id="marketTips">
                        <!-- Dicas ser√£o carregadas aqui pelo JavaScript -->
                    </ul>
                </div>

                <!-- Avalia√ß√£o Autom√°tica do Plano -->
                <div class="planning-section plan-evaluation-section">
                    <h2>Avalia√ß√£o R√°pida do Plano</h2>
                    <button id="evaluatePlanBtn">Avaliar Meu Plano</button>
                    <div id="evaluationResult">
                        Seu feedback de avalia√ß√£o aparecer√° aqui.
                    </div>
                </div>
            </section>
        </main>

        <!-- Rodap√© -->
        <footer class="footer">
            <p>&copy; 2025 Impulso Empreendedor. Todos os direitos reservados.</p>
        </footer>
    </div>

    <script>
        // Array para armazenar os planos de neg√≥cio
        let businessPlans = [];
        let currentEditingPlanId = null; // ID do plano atualmente em edi√ß√£o

        // Refer√™ncias aos elementos HTML
        const planList = document.getElementById('planList');
        const planNameInput = document.getElementById('planName');
        const objectiveTextarea = document.getElementById('objective');
        const strategyTextarea = document.getElementById('strategy');
        const metricsTextarea = document.getElementById('metrics');
        const goalsTextarea = document.getElementById('goals');
        const competitorsTextarea = document.getElementById('competitors');

        // Revenue Tracking Elements
        const monthlyGoalInput = document.getElementById('monthlyGoal');
        const currentMonthRevenueInput = document.getElementById('currentMonthRevenue');
        const lastMonthRevenueDisplay = document.getElementById('lastMonthRevenueDisplay');
        const growthOrDeclineDisplay = document.getElementById('growthOrDeclineDisplay');
        const goalMetDisplay = document.getElementById('goalMetDisplay');
        const updateRevenueBtn = document.getElementById('updateRevenueBtn');
        const generateReportBtn = document.getElementById('generateReportBtn');

        const sectorSelect = document.getElementById('sectorSelect');
        const selectedSectorDetailsDiv = document.getElementById('selectedSectorDetails');

        const savePlanBtn = document.getElementById('savePlanBtn');
        const newPlanBtn = document.getElementById('newPlanBtn');
        const deletePlanBtn = document.getElementById('deletePlanBtn');
        const exportPdfBtn = document.getElementById('exportPdfBtn');
        const evaluatePlanBtn = document.getElementById('evaluatePlanBtn');
        const evaluationResultDiv = document.getElementById('evaluationResult');
        const sectorDataTable = document.getElementById('sectorDataTable');
        const marketTipsList = document.getElementById('marketTips');
        const simulatedCompetitionLevelSpan = document.getElementById('simulatedCompetitionLevel');
        const competitionTipsList = document.getElementById('competitionTips');
        const championProductsListDiv = document.getElementById('championProductsList');
        const essentialInfoList = document.getElementById('essentialInfoList');

        // --- Fun√ß√µes de Utilit√°rio ---

        /**
         * Exibe uma mensagem flutuante na tela para feedback do usu√°rio.
         * @param {string} texto - O texto da mensagem a ser exibida.
         * @param {number} duracao - Dura√ß√£o em milissegundos para a mensagem permanecer (padr√£o: 3000ms).
         */
        function exibirMensagem(texto, duracao = 3000) {
            let mensagemDiv = document.querySelector('.message-box');
            if (!mensagemDiv) {
                mensagemDiv = document.createElement('div');
                mensagemDiv.classList.add('message-box');
                document.body.appendChild(mensagemDiv);
            }

            mensagemDiv.textContent = texto;
            mensagemDiv.classList.add('show');

            // Garante que a mensagem ser√° removida ap√≥s a dura√ß√£o
            setTimeout(() => {
                mensagemDiv.classList.remove('show');
                // Remove o elemento ap√≥s a transi√ß√£o se ele n√£o for reutilizado
                setTimeout(() => {
                    if (!mensagemDiv.classList.contains('show')) {
                        mensagemDiv.remove();
                    }
                }, 500); // Tempo da transi√ß√£o CSS
            }, duracao);
        }

        /**
         * Limpa os campos do editor de plano de neg√≥cio e os campos de faturamento.
         */
        function clearEditor() {
            planNameInput.value = '';
            objectiveTextarea.value = '';
            strategyTextarea.value = '';
            metricsTextarea.value = '';
            goalsTextarea.value = '';
            competitorsTextarea.value = '';

            // Limpa campos de faturamento
            monthlyGoalInput.value = '';
            currentMonthRevenueInput.value = '';
            lastMonthRevenueDisplay.textContent = 'R$ 0,00';
            growthOrDeclineDisplay.textContent = 'N/A';
            growthOrDeclineDisplay.className = ''; // Remove classes de cor
            goalMetDisplay.textContent = 'N/A';
            goalMetDisplay.className = ''; // Remove classes de cor

            currentEditingPlanId = null; // Zera o ID do plano em edi√ß√£o
            deletePlanBtn.style.display = 'none'; // Esconde o bot√£o de excluir
            savePlanBtn.textContent = 'Salvar Plano'; // Altera texto do bot√£o salvar
            // Remove a sele√ß√£o de qualquer item na lista
            document.querySelectorAll('.plan-list-sidebar li').forEach(li => {
                li.classList.remove('selected');
            });
            evaluationResultDiv.textContent = 'Seu feedback de avalia√ß√£o aparecer√° aqui.';
            updateCompetitionAnalysis(); // Atualiza a an√°lise de concorr√™ncia ao limpar

            sectorSelect.value = ''; // Limpa a sele√ß√£o do setor
            displayDetailedSectorAnalysis(); // Limpa os detalhes do setor
        }

        // --- Fun√ß√µes de Gerenciamento de Planos ---

        /**
         * Carrega os planos de neg√≥cio do localStorage.
         */
        function loadPlans() {
            const storedPlans = localStorage.getItem('businessPlans');
            if (storedPlans) {
                businessPlans = JSON.parse(storedPlans);
            } else {
                businessPlans = [];
            }
            renderPlanList();
        }

        /**
         * Salva os planos de neg√≥cio no localStorage.
         */
        function savePlansToLocalStorage() {
            localStorage.setItem('businessPlans', JSON.stringify(businessPlans));
            exibirMensagem('Plano salvo com sucesso!');
        }

        /**
         * Cria ou atualiza um plano de neg√≥cio.
         */
        function savePlan() {
            const planName = planNameInput.value.trim();
            const objective = objectiveTextarea.value.trim();
            const strategy = strategyTextarea.value.trim();
            const metrics = metricsTextarea.value.trim();
            const goals = goalsTextarea.value.trim();
            const competitors = competitorsTextarea.value.trim();

            const monthlyGoal = parseFloat(monthlyGoalInput.value) || 0;
            const currentMonthRevenue = parseFloat(currentMonthRevenueInput.value) || 0;


            if (!planName) {
                exibirMensagem('O nome do plano √© obrigat√≥rio!', 2000);
                return;
            }

            if (currentEditingPlanId) {
                // Atualiza um plano existente
                const planIndex = businessPlans.findIndex(p => p.id === currentEditingPlanId);
                if (planIndex !== -1) {
                    // Guarda o faturamento atual como faturamento do m√™s passado para a pr√≥xima vez que o plano for carregado
                    const oldCurrentRevenue = businessPlans[planIndex].currentMonthRevenue || 0;

                    businessPlans[planIndex] = {
                        id: currentEditingPlanId,
                        name: planName,
                        objective: objective,
                        strategy: strategy,
                        metrics: metrics,
                        goals: goals,
                        competitors: competitors,
                        monthlyGoal: monthlyGoal,
                        currentMonthRevenue: currentMonthRevenue,
                        lastMonthRevenue: oldCurrentRevenue // Atribui o faturamento atual como passado
                    };
                }
            } else {
                // Cria um novo plano
                const newPlan = {
                    id: Date.now().toString(),
                    name: planName,
                    objective: objective,
                    strategy: strategy,
                    metrics: metrics,
                    goals: goals,
                    competitors: competitors,
                    monthlyGoal: monthlyGoal,
                    currentMonthRevenue: currentMonthRevenue,
                    lastMonthRevenue: 0 // Novo plano, m√™s passado √© 0
                };
                businessPlans.push(newPlan);
            }
            savePlansToLocalStorage();
            renderPlanList();
            clearEditor(); // Limpa o editor ap√≥s salvar/atualizar
        }

        /**
         * Renderiza a lista de planos na sidebar.
         */
        function renderPlanList() {
            planList.innerHTML = ''; // Limpa a lista existente

            // Adiciona o item "Novo Plano"
            const newPlanItem = document.createElement('li');
            newPlanItem.classList.add('new-plan-item');
            newPlanItem.setAttribute('onclick', 'createNewPlan()');
            newPlanItem.innerHTML = '<span class="new-plan-text">+ Novo Plano</span>';
            planList.appendChild(newPlanItem);

            businessPlans.forEach(plan => {
                const li = document.createElement('li');
                li.setAttribute('data-id', plan.id);
                li.innerHTML = `
                    <span>${plan.name}</span>
                    <button onclick="deletePlan('${plan.id}', event)">üóëÔ∏è</button>
                `;
                li.addEventListener('click', () => loadPlanToEditor(plan.id));
                planList.appendChild(li);

                if (plan.id === currentEditingPlanId) {
                    li.classList.add('selected'); // Mant√©m a sele√ß√£o se estiver editando
                }
            });
        }

        /**
         * Carrega um plano para o editor.
         * @param {string} planId - O ID do plano a ser carregado.
         */
        function loadPlanToEditor(planId) {
            const plan = businessPlans.find(p => p.id === planId);
            if (plan) {
                clearEditor(); // Limpa antes de carregar
                planNameInput.value = plan.name;
                objectiveTextarea.value = plan.objective;
                strategyTextarea.value = plan.strategy;
                metricsTextarea.value = plan.metrics;
                goalsTextarea.value = plan.goals;
                competitorsTextarea.value = plan.competitors || '';

                monthlyGoalInput.value = plan.monthlyGoal || '';
                currentMonthRevenueInput.value = plan.currentMonthRevenue || '';

                currentEditingPlanId = plan.id;
                deletePlanBtn.style.display = 'inline-block'; // Mostra o bot√£o de excluir
                savePlanBtn.textContent = 'Atualizar Plano'; // Altera texto do bot√£o salvar

                // Adiciona classe 'selected' ao item da lista
                document.querySelectorAll('.plan-list-sidebar li').forEach(li => {
                    li.classList.remove('selected');
                });
                document.querySelector(`.plan-list-sidebar li[data-id="${planId}"]`).classList.add('selected');
                exibirMensagem(`Plano "${plan.name}" carregado.`, 2000);
                updateCompetitionAnalysis(); // Atualiza a an√°lise de concorr√™ncia
                updateRevenueDisplay(); // Atualiza a exibi√ß√£o de faturamento
            }
        }

        /**
         * Exclui um plano de neg√≥cio.
         * @param {string} planId - O ID do plano a ser exclu√≠do.
         * @param {Event} event - O evento de clique (para parar a propaga√ß√£o).
         */
        function deletePlan(planId, event) {
            event.stopPropagation(); // Impede que o clique na lixeira carregue o plano
            if (window.confirm('Tem certeza que deseja excluir este plano?')) {
                businessPlans = businessPlans.filter(p => p.id !== planId);
                savePlansToLocalStorage();
                renderPlanList();
                if (currentEditingPlanId === planId) {
                    clearEditor(); // Limpa o editor se o plano exclu√≠do estava sendo editado
                }
                exibirMensagem('Plano exclu√≠do com sucesso!', 2000);
            }
        }

        /**
         * Inicia a cria√ß√£o de um novo plano, limpando o editor.
         */
        function createNewPlan() {
            clearEditor();
            exibirMensagem('Comece um novo plano!', 2000);
        }

        /**
         * Exporta o plano atual em PDF (via funcionalidade de impress√£o do navegador).
         */
        function exportPlanAsPdf() {
            const planName = planNameInput.value.trim();
            if (!planName) {
                exibirMensagem('N√£o h√° plano para exportar. Salve um plano primeiro!', 2500);
                return;
            }

            // Oculta elementos que n√£o devem aparecer no PDF
            document.querySelector('.header').style.display = 'none';
            document.querySelector('.plan-list-sidebar').style.display = 'none';
            document.querySelector('.footer').style.display = 'none';
            document.querySelector('.editor-buttons').style.display = 'none';
            document.querySelector('.market-analysis-section').style.display = 'none';
            document.querySelector('.plan-evaluation-section').style.display = 'none';
            document.getElementById('revenueTrackingSection').style.display = 'none'; // Oculta nova se√ß√£o
            document.querySelector('.main-content').style.border = 'none'; // Remove a borda verde principal
            document.querySelector('.main-content').style.boxShadow = 'none'; // Remove a sombra principal


            // Ajusta o estilo do corpo para a impress√£o
            document.body.style.backgroundColor = 'white';
            document.body.style.color = '#000';
            document.querySelector('.planning-main-area').style.width = '100%';
            document.querySelector('.planning-main-area').style.maxWidth = 'none';
            document.querySelector('.planning-main-area').style.padding = '1rem';

            // Adiciona um t√≠tulo ao PDF
            const pdfTitle = document.createElement('h1');
            pdfTitle.textContent = `Plano de Neg√≥cio: ${planName}`;
            pdfTitle.style.textAlign = 'center';
            pdfTitle.style.color = '#333';
            pdfTitle.style.marginBottom = '20px';
            document.getElementById('businessPlanEditor').prepend(pdfTitle);

            window.print();

            // Restaura os elementos e estilos ap√≥s a impress√£o
            pdfTitle.remove(); // Remove o t√≠tulo adicionado
            document.querySelector('.header').style.display = 'block';
            document.querySelector('.plan-list-sidebar').style.display = 'block';
            document.querySelector('.footer').style.display = 'block';
            document.querySelector('.editor-buttons').style.display = 'flex'; /* Volta para flex */
            document.querySelector('.market-analysis-section').style.display = 'block';
            document.querySelector('.plan-evaluation-section').style.display = 'block';
            document.getElementById('revenueTrackingSection').style.display = 'block'; // Mostra nova se√ß√£o
            document.querySelector('.main-content').style.border = '1px solid var(--cor-principal-claro)'; // Restaura a borda verde principal
            document.querySelector('.main-content').style.boxShadow = 'var(--sombra-card)'; // Restaura a sombra principal


            // Restaura estilos do corpo
            document.body.style.backgroundColor = 'var(--cor-fundo-escuro)';
            document.body.style.color = 'var(--cor-texto-escuro)';
            document.querySelector('.planning-main-area').style.width = ''; /* Volta ao padr√£o */
            document.querySelector('.planning-main-area').style.maxWidth = ''; /* Volta ao padr√£o */
            document.querySelector('.planning-main-area').style.padding = ''; /* Volta ao padr√£o */
        }

        // --- Fun√ß√µes de An√°lise de Mercado (Dados Fict√≠cios) ---

        const marketData = {
            sectors: [
                {
                    name: 'Tecnologia Verde', status: 'Alta', trend: 'Crescimento Acelerado',
                    opportunities: [
                        'Demanda crescente por solu√ß√µes sustent√°veis em todas as ind√∫strias.',
                        'Incentivos governamentais e financiamentos para projetos de energia limpa e redu√ß√£o de carbono.',
                        'Expans√£o do mercado de ve√≠culos el√©tricos e infraestrutura de carregamento.',
                        'Automa√ß√£o e otimiza√ß√£o de recursos naturais atrav√©s de IoT e IA.',
                        'Consci√™ncia ambiental do consumidor impulsionando produtos e servi√ßos eco-friendly.'
                    ],
                    challenges: [
                        'Alto custo inicial de implementa√ß√£o para novas tecnologias.',
                        'Regulamenta√ß√£o complexa e em constante mudan√ßa.',
                        'Barreiras de entrada para pequenas empresas devido a P&D intensivo.',
                        'Necessidade de educa√ß√£o e conscientiza√ß√£o do mercado.',
                        'Concorr√™ncia de gigantes tecnol√≥gicos j√° estabelecidos.'
                    ],
                    keySuccessFactors: [
                        'Inova√ß√£o tecnol√≥gica cont√≠nua e desenvolvimento de patentes.',
                        'Parcerias estrat√©gicas com grandes empresas e governos.',
                        'Certifica√ß√µes e conformidade com padr√µes ambientais e de qualidade.',
                        'Modelo de neg√≥cios escal√°vel e acess√≠vel.',
                        'Marketing focado nos benef√≠cios ambientais e econ√¥micos.'
                    ],
                    recommendation: 'Este setor √© um dos mais promissores. Foque em um nicho espec√≠fico dentro da tecnologia verde, como reciclagem de eletr√¥nicos ou solu√ß√µes de energia solar para pequenos neg√≥cios. Invista pesado em pesquisa e desenvolvimento, buscando diferencia√ß√£o atrav√©s de tecnologia propriet√°ria. Parcerias com o setor p√∫blico ou grandes empresas podem acelerar sua entrada e valida√ß√£o no mercado.'
                },
                {
                    name: 'Sa√∫de Digital', status: 'Alta', trend: 'Expans√£o Constante',
                    opportunities: [
                        'Aumento da demanda por conveni√™ncia e acesso remoto a servi√ßos de sa√∫de (telemedicina).',
                        'Envelhecimento da popula√ß√£o e necessidade de monitoramento cont√≠nuo de sa√∫de.',
                        'Uso de Big Data e IA para diagn√≥sticos mais precisos e tratamentos personalizados.',
                        'Ado√ß√£o de wearables e dispositivos conectados para acompanhamento de sa√∫de.',
                        'Solu√ß√µes para otimiza√ß√£o da gest√£o hospitalar e cl√≠nicas.'
                    ],
                    challenges: [
                        'Seguran√ßa e privacidade dos dados de pacientes (LGPD/HIPAA).',
                        'Resist√™ncia √† ado√ß√£o de novas tecnologias por parte de profissionais e pacientes.',
                        'Integra√ß√£o com sistemas legados de sa√∫de.',
                        'Alto investimento em tecnologia e infraestrutura.',
                        'Regulamenta√ß√£o e licenciamento complexos para a √°rea da sa√∫de.'
                    ],
                    keySuccessFactors: [
                        'Plataformas intuitivas e seguras para o usu√°rio final.',
                        'Integra√ß√£o de servi√ßos (consultas, exames, medicamentos).',
                        'Parcerias com hospitais, cl√≠nicas e planos de sa√∫de.',
                        'Foco na experi√™ncia do paciente e personaliza√ß√£o do atendimento.',
                        'Equipe multidisciplinar com expertise em sa√∫de e tecnologia.'
                    ],
                    recommendation: 'A Sa√∫de Digital est√° em ascens√£o. Considere desenvolver uma solu√ß√£o para um problema espec√≠fico, como agendamento de consultas com IA ou monitoramento de doen√ßas cr√¥nicas. A confian√ßa e a seguran√ßa dos dados s√£o primordiais. Garanta que sua plataforma seja f√°cil de usar e que agregue valor real tanto para pacientes quanto para profissionais da sa√∫de.'
                },
                {
                    name: 'Alimenta√ß√£o Saud√°vel e Sustent√°vel', status: 'Alta', trend: 'Forte Demanda',
                    opportunities: [
                        'Crescente preocupa√ß√£o com sa√∫de, bem-estar e alimenta√ß√£o consciente (org√¢nicos, veganos, sem gl√∫ten).',
                        'Busca por produtos de origem local, transparente e rastre√°vel, valorizando pequenos produtores.',
                        'Conveni√™ncia e praticidade em refei√ß√µes saud√°veis (kits, marmitas, delivery, comidas prontas).',
                        'Expans√£o do mercado de nicho para dietas espec√≠ficas, alergias alimentares e restri√ß√µes.',
                        'Engajamento com causas ambientais e sociais atrav√©s de pr√°ticas sustent√°veis na cadeia produtiva.'
                    ],
                    challenges: [
                        'Log√≠stica complexa para produtos perec√≠veis, garantindo frescor e qualidade.',
                        'Alto custo de produ√ß√£o para insumos org√¢nicos e com certifica√ß√µes de sustentabilidade.',
                        'Forte concorr√™ncia de grandes redes de supermercados e marcas estabelecidas.',
                        'Necessidade de certifica√ß√µes rigorosas e conformidade com normas sanit√°rias.',
                        'Educa√ß√£o cont√≠nua do consumidor sobre os benef√≠cios e o valor agregado dos produtos.'
                    ],
                    keySuccessFactors: [
                        'Qualidade inquestion√°vel, autenticidade e frescor dos ingredientes.',
                        'Efici√™ncia na cadeia de suprimentos e entrega (do produtor √† mesa).',
                        'Narrativa de marca forte e transparente sobre a origem, valores e impacto social/ambiental.',
                        'Personaliza√ß√£o e variedade de produtos para atender a diferentes necessidades e prefer√™ncias diet√©ticas.',
                        'Marketing digital eficaz focado em sa√∫de, bem-estar, conveni√™ncia e sustentabilidade.'
                    ],
                    recommendation: 'Este setor possui um enorme potencial, mas exige aten√ß√£o √† autenticidade e √† log√≠stica. Focar em nichos espec√≠ficos, como lanches saud√°veis para crian√ßas ou refei√ß√µes plant-based para atletas, pode ser uma boa estrat√©gia. A rastreabilidade dos ingredientes e uma comunica√ß√£o clara sobre seus valores far√£o a diferen√ßa. Invista em embalagens sustent√°veis e uma experi√™ncia de compra conveniente.'
                },
                {
                    name: 'Servi√ßos de Streaming', status: 'Est√°vel', trend: 'Concorr√™ncia Crescente',
                    opportunities: [
                        'Expans√£o para novos mercados emergentes com baixa penetra√ß√£o.',
                        'Cria√ß√£o de conte√∫do exclusivo e de nicho para atrair p√∫blicos espec√≠ficos.',
                        'Modelos de neg√≥cio h√≠bridos (assinatura + publicidade) para maior flexibilidade.',
                        'Aumento da demanda por conte√∫do interativo e experi√™ncias imersivas.',
                        'Parcerias com criadores de conte√∫do independentes e est√∫dios menores.'
                    ],
                    challenges: [
                        'Satura√ß√£o e fragmenta√ß√£o do mercado com muitos concorrentes.',
                        'Alto custo de produ√ß√£o e licenciamento de conte√∫do de qualidade.',
                        'Pirateria e acesso ilegal a conte√∫do.',
                        'Churn (evas√£o de assinantes) devido √† vasta oferta e busca por novidades.',
                        'Necessidade de inova√ß√£o constante para manter o engajamento.'
                    ],
                    keySuccessFactors: [
                        'Conte√∫do original, relevante e de alta qualidade.',
                        'Experi√™ncia de usu√°rio fluida e personalizada (recomenda√ß√µes).',
                        'Modelos de precifica√ß√£o flex√≠veis e planos familiares atraentes.',
                        'Compatibilidade com m√∫ltiplos dispositivos e plataformas.',
                        'Forte investimento em marketing e aquisi√ß√£o de novos assinantes.'
                    ],
                    recommendation: 'O mercado de streaming √© competitivo. Para se destacar, concentre-se em um nicho de conte√∫do espec√≠fico (por exemplo, document√°rios de natureza, filmes independentes) ou explore um modelo de neg√≥cio inovador, como o acesso a eventos ao vivo exclusivos. A fideliza√ß√£o do cliente atrav√©s de conte√∫do de alta qualidade e uma excelente experi√™ncia de usu√°rio √© fundamental.'
                },
                {
                    name: 'Varejo F√≠sico Tradicional', status: 'Est√°vel', trend: 'Transforma√ß√£o Digital Necess√°ria',
                    opportunities: [
                        'Cria√ß√£o de experi√™ncias de compra diferenciadas e imersivas na loja f√≠sica.',
                        'Integra√ß√£o fluida com e-commerce (estrat√©gia omnichannel: compre online, retire na loja).',
                        'Uso de tecnologia (Realidade Aumentada, VR, IA) para personalizar a jornada do cliente.',
                        'Focar em curadoria de produtos e atendimento personalizado que o online n√£o oferece.',
                        'Eventos na loja e comunidades de clientes.'
                    ],
                    challenges: [
                        'Crescimento exponencial do e-commerce e mudan√ßa nos h√°bitos de consumo.',
                        'Custos operacionais elevados (aluguel, funcion√°rios, estoque).',
                        'Forte competi√ß√£o de pre√ßos com varejistas online.',
                        'Necessidade de constante renova√ß√£o do estoque e vitrines.',
                        'Adapta√ß√£o a novas tecnologias e expectativas do consumidor.'
                    ],
                    keySuccessFactors: [
                        'Otimiza√ß√£o da experi√™ncia na loja: ambiente agrad√°vel, atendimento de excel√™ncia.',
                        'Integra√ß√£o eficaz de canais de venda (online e offline).',
                        'Agilidade na adapta√ß√£o √†s mudan√ßas de consumo e tend√™ncias de mercado.',
                        'Curadoria de produtos √∫nica e exclusiva.',
                        'Forte presen√ßa em m√≠dias sociais para atrair tr√°fego para a loja f√≠sica.'
                    ],
                    recommendation: 'O varejo f√≠sico precisa se reinventar. Invista em uma experi√™ncia de loja que seja um destino, n√£o apenas um ponto de venda. Integre o online e o offline, permitindo que o cliente comece a compra em um canal e finalize em outro. Use a tecnologia para personalizar ofertas e aprimorar o atendimento. O atendimento humano e a atmosfera da loja s√£o seus maiores diferenciais.'
                },
                {
                    name: 'M√≠dia Impressa Tradicional', status: 'Queda', trend: 'Decl√≠nio Lento',
                    opportunities: [
                        'Nicho de leitores fi√©is que valorizam o formato f√≠sico e o conte√∫do aprofundado.',
                        'Conte√∫do de alta qualidade, investigativo e anal√≠tico que se diferencia de not√≠cias r√°pidas online.',
                        'Transi√ß√£o para o digital com modelos de assinatura para acesso a conte√∫do premium online.',
                        'Eventos e workshops relacionados ao conte√∫do para engajar a comunidade de leitores.',
                        'Cria√ß√£o de produtos de nicho (revistas de arte, design, hobbies espec√≠ficos).'
                    ],
                    challenges: [
                        'Queda cont√≠nua na circula√ß√£o e na receita de publicidade impressa.',
                        'Forte concorr√™ncia da m√≠dia digital gratuita e das redes sociais.',
                        'Custos elevados de impress√£o, papel e distribui√ß√£o.',
                        'Dificuldade em atrair e reter novos leitores jovens.',
                        'Percep√ß√£o de obsolesc√™ncia do formato impresso.'
                    ],
                    keySuccessFactors: [
                        'Conte√∫do exclusivo, de alta qualidade e com valor agregado (an√°lises, reportagens).',
                        'Desenvolvimento de um modelo de neg√≥cios digital robusto (assinaturas, paywalls).',
                        'Engajamento da comunidade de leitores e cria√ß√£o de lealdade √† marca.',
                        'Explora√ß√£o de nichos espec√≠ficos com alta demanda por conte√∫do especializado.',
                        'Diversifica√ß√£o de receita com eventos, merchandising ou consultoria.'
                    ],
                    recommendation: 'A m√≠dia impressa enfrenta desafios, mas h√° oportunidades em nichos. Concentre-se em conte√∫do de valor que n√£o pode ser facilmente encontrado online. Desenvolva um modelo h√≠brido, onde o impresso √© um produto premium e o digital oferece acesso cont√≠nuo e mais din√¢mico. A constru√ß√£o de uma comunidade engajada e eventos exclusivos podem ser diferenciais.'
                },
                {
                    name: 'Loca√ß√£o de DVDs/Fitas', status: 'Queda', trend: 'Obsolesc√™ncia',
                    opportunities: [
                        'Mercado de nicho para colecionadores, entusiastas de cinema e nost√°lgicos.',
                        'Servi√ßos especializados de convers√£o de m√≠dias antigas (VHS para digital).',
                        'Venda de itens raros e colecion√°veis para entusiastas.',
                        'Experi√™ncias tem√°ticas (noites de cinema retr√¥, eventos de troca de filmes).',
                        'Parcerias com sebos e lojas de artigos vintage.'
                    ],
                    challenges: [
                        'Predomin√¢ncia absoluta dos servi√ßos de streaming e plataformas digitais.',
                        'Baixa demanda em massa e dificuldade em atrair novos clientes.',
                        'Disponibilidade limitada de equipamentos de reprodu√ß√£o (videocassetes, DVDs players antigos).',
                        'Custos de manuten√ß√£o de acervo f√≠sico e armazenamento.',
                        'Percep√ß√£o geral de obsolesc√™ncia do formato.'
                    ],
                    keySuccessFactors: [
                        'Focar em nichos muito espec√≠ficos e apaixonados.',
                        'Valoriza√ß√£o da raridade, originalidade e colecionismo.',
                        'Cria√ß√£o de uma experi√™ncia nost√°lgica e aut√™ntica.',
                        'Diversifica√ß√£o para servi√ßos relacionados (restaura√ß√£o de fitas, vendas de aparelhos antigos).',
                        'Presen√ßa em feiras e eventos de cultura pop/geek.'
                    ],
                    recommendation: 'Este √© um mercado em decl√≠nio. Se for atuar, foque em um nicho muito espec√≠fico de colecionadores e amantes de cinema. A digitaliza√ß√£o de acervos antigos e a cria√ß√£o de um senso de comunidade em torno da nostalgia podem gerar valor. Considere eventos tem√°ticos ou a venda de edi√ß√µes raras para se diferenciar.'
                }
            ],
            tips: [
                'Invista em pesquisa de mercado para identificar nichos espec√≠ficos e n√£o atendidos.',
                'Foque na inova√ß√£o e diferencia√ß√£o para se destacar da concorr√™ncia.',
                'Construa uma marca forte e utilize o marketing digital de forma estrat√©gica (redes sociais, SEO, e-mail marketing).',
                'Priorize a experi√™ncia do cliente e a qualidade do seu produto ou servi√ßo em todas as intera√ß√µes.',
                'Busque parcerias estrat√©gicas que possam alavancar seu crescimento e alcance.',
                'Mantenha-se constantemente atualizado com as novas tecnologias e tend√™ncias do seu setor.',
                'Desenvolva um plano de neg√≥cios flex√≠vel e adapt√°vel √†s constantes mudan√ßas do mercado.'
            ],
            competitionTips: [
                'Analise a estrat√©gia de precifica√ß√£o, marketing e vendas dos seus concorrentes.',
                'Identifique lacunas no mercado ou dores dos clientes que seus concorrentes n√£o atendem.',
                'Monitore as redes sociais e avalia√ß√µes online dos seus competidores para aprender com seus acertos e erros.',
                'Diferencie-se pela inova√ß√£o, um atendimento ao cliente excepcional ou uma proposta de valor √∫nica.',
                'Crie um plano de conting√™ncia para antecipar e reagir a movimentos agressivos da concorr√™ncia.'
            ],
            championProducts: [
                {
                    name: 'Assinatura de Kits de Horta Dom√©stica Inteligente',
                    niche: 'Tecnologia Verde',
                    description: 'Kits mensais de sementes org√¢nicas e um sistema hidrop√¥nico ou de irriga√ß√£o inteligente, controlado via app, que otimiza o cultivo em casa com m√≠nima interven√ß√£o.',
                    keySuccessFactor: 'Facilidade de uso, resultados vis√≠veis e r√°pidos para o cliente, componente tecnol√≥gico intuitivo e ecol√≥gico que simplifica a jardinagem urbana.',
                    whyChampion: 'Capitaliza a tend√™ncia de "fa√ßa voc√™ mesmo" (DIY), o desejo por alimentos frescos e saud√°veis, e a sustentabilidade, utilizando tecnologia para tornar o cultivo acess√≠vel mesmo para quem n√£o tem experi√™ncia ou espa√ßo.'
                },
                {
                    name: 'Aplicativo de Apoio Psicol√≥gico com IA e Terapeutas',
                    niche: 'Sa√∫de Digital',
                    description: 'Plataforma que combina chatbot de IA para suporte inicial e di√°rio, com acesso a sess√µes de terapia online com profissionais licenciados. Foco na acessibilidade e personaliza√ß√£o.',
                    keySuccessFactor: 'Combina√ß√£o de tecnologia (IA) com o toque humano do terapeuta, seguran√ßa e privacidade dos dados, e um modelo de assinatura flex√≠vel.',
                    whyChampion: 'Responde √† crescente demanda por sa√∫de mental, oferecendo uma solu√ß√£o h√≠brida que une a conveni√™ncia da IA para suporte imediato com a profundidade da terapia humana, democratizando o acesso e reduzindo o estigma.'
                },
                {
                    name: 'Plataforma de E-commerce para Artesanato e Produtos Feitos √† M√£o',
                    niche: 'Artesanato e Produtos Exclusivos',
                    description: 'Um marketplace focado em conectar artes√£os locais e independentes com consumidores que buscam produtos √∫nicos, sustent√°veis e personalizados, com curadoria de alta qualidade.',
                    keySuccessFactor: 'Curadoria rigorosa, forte senso de comunidade entre artes√£os e clientes, marketing focado na hist√≥ria por tr√°s dos produtos, e uma experi√™ncia de compra visualmente atraente.',
                    whyChampion: 'Atende √† busca por exclusividade e personaliza√ß√£o em um mundo massificado. Valoriza o trabalho manual, a sustentabilidade e a conex√£o direta entre produtor e consumidor, algo que grandes varejistas n√£o conseguem replicar facilmente.'
                },
                {
                    name: 'Servi√ßo de Consultoria de Marketing Digital para Pequenos Neg√≥cios Locais',
                    niche: 'Servi√ßos B2B Locais',
                    description: 'Consultoria especializada em criar e otimizar a presen√ßa digital de pequenos neg√≥cios (restaurantes, sal√µes, lojas de bairro) com foco em SEO local, Google Meu Neg√≥cio e campanhas de an√∫ncios geolocalizadas.',
                    keySuccessFactor: 'Resultados mensur√°veis e r√°pidos, linguagem acess√≠vel para n√£o especialistas, foco em retorno sobre investimento (ROI) e um servi√ßo altamente personalizado e local.',
                    whyChampion: 'Muitos pequenos neg√≥cios locais ainda lutam com a digitaliza√ß√£o. Este servi√ßo oferece uma solu√ß√£o pr√°tica e direcionada, ajudando-os a atrair clientes na sua regi√£o sem a necessidade de grandes or√ßamentos ou conhecimentos t√©cnicos aprofundados.'
                }
            ],
            essentialInfo: [
                { title: 'Aspectos Legais e Burocracia', content: 'Registro de CNPJ, licen√ßas, alvar√°s, contratos sociais e fiscais. √â fundamental consultar um contador e um advogado especializados para garantir que seu neg√≥cio esteja totalmente formalizado e em conformidade com a legisla√ß√£o, evitando problemas futuros.' },
                { title: 'Gest√£o Financeira Descomplicada', content: 'Controle de fluxo de caixa (entradas e sa√≠das de dinheiro), precifica√ß√£o correta de produtos/servi√ßos, gest√£o de capital de giro e planejamento or√ßament√°rio. Manter as finan√ßas organizadas √© crucial para a sa√∫de do seu neg√≥cio e para evitar surpresas desagrad√°veis.' },
                { title: 'Marketing e Vendas Eficazes', content: 'Conhe√ßa profundamente seu p√∫blico-alvo, defina uma proposta de valor clara e utilize estrat√©gias de marketing digital (redes sociais, SEO, e-mail marketing, tr√°fego pago). Foque na constru√ß√£o de uma marca forte e no relacionamento com o cliente.' },
                { title: 'Gest√£o de Pessoas e Cultura', content: 'Contrate os talentos certos, invista em treinamento e desenvolvimento, crie um ambiente de trabalho positivo e valorize sua equipe. Colaboradores engajados e satisfeitos s√£o seu maior ativo e impulsionam o sucesso do neg√≥cio.' },
                { title: 'Inova√ß√£o e Adaptabilidade Constante', content: 'O mercado est√° em constante mudan√ßa. Esteja sempre aberto a novas ideias, monitore tend√™ncias, utilize feedbacks dos clientes para aprimorar e seja flex√≠vel para adaptar seu modelo de neg√≥cio e estrat√©gias quando necess√°rio para se manter relevante.' }
            ]
        };

        /**
         * Preenche o dropdown de setores com os dados do marketData.
         */
        function populateSectorDropdown() {
            sectorSelect.innerHTML = '<option value="">Selecione um setor...</option>'; // Reseta e adiciona op√ß√£o padr√£o
            marketData.sectors.forEach(sector => {
                const option = document.createElement('option');
                option.value = sector.name;
                option.textContent = sector.name;
                sectorSelect.appendChild(option);
            });
        }

        /**
         * Exibe os dados detalhados de um setor selecionado.
         */
        function displayDetailedSectorAnalysis() {
            const selectedSectorName = sectorSelect.value;
            const selectedSector = marketData.sectors.find(s => s.name === selectedSectorName);

            if (selectedSector) {
                selectedSectorDetailsDiv.innerHTML = `
                    <h4>An√°lise Detalhada para ${selectedSector.name}</h4>
                    <p><strong>Situa√ß√£o Atual:</strong> ${selectedSector.status}</p>
                    <p><strong>Tend√™ncia:</strong> ${selectedSector.trend}</p>
                    <h4>Oportunidades:</h4>
                    <ul>
                        ${selectedSector.opportunities.map(o => `<li>${o}</li>`).join('')}
                    </ul>
                    <h4>Desafios:</h4>
                    <ul>
                        ${selectedSector.challenges.map(c => `<li>${c}</li>`).join('')}
                    </ul>
                    <h4>Fatores Chave de Sucesso:</h4>
                    <ul>
                        ${selectedSector.keySuccessFactors.map(f => `<li>${f}</li>`).join('')}
                    </ul>
                    <h4>Recomenda√ß√£o Estrat√©gica:</h4>
                    <p>${selectedSector.recommendation}</p>
                `;
            } else {
                selectedSectorDetailsDiv.innerHTML = '<p>Selecione um setor acima para ver sua an√°lise detalhada.</p>';
            }
        }

        /**
         * Exibe os dados de an√°lise de mercado na tabela e as dicas.
         */
        function displayMarketAnalysis() {
            // Preenche a tabela de setores
            sectorDataTable.innerHTML = '';
            marketData.sectors.forEach(sector => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${sector.name}</td>
                    <td style="color: ${sector.status === 'Alta' ? 'green' : sector.status === 'Est√°vel' ? 'orange' : 'red'}; font-weight: 600;">${sector.status}</td>
                    <td>${sector.trend}</td>
                `;
                sectorDataTable.appendChild(tr);
            });

            // Preenche as dicas gerais de mercado
            marketTipsList.innerHTML = '';
            marketData.tips.forEach(tip => {
                const li = document.createElement('li');
                li.textContent = tip;
                marketTipsList.appendChild(li);
            });

            // Preenche as dicas de concorr√™ncia
            competitionTipsList.innerHTML = '';
            marketData.competitionTips.forEach(tip => {
                const li = document.createElement('li');
                li.textContent = tip;
                competitionTipsList.appendChild(li);
            });

            // Preenche os produtos campe√µes
            championProductsListDiv.innerHTML = '';
            marketData.championProducts.forEach(product => {
                const div = document.createElement('div');
                div.classList.add('champion-product-card');
                div.innerHTML = `
                    <h4>${product.name}</h4>
                    <p><strong>Nicho:</strong> ${product.niche}</p>
                    <p>${product.description}</p>
                    <p><strong>Fator Chave de Sucesso:</strong> ${product.keySuccessFactor}</p>
                    <span><strong>Por que √© um Campe√£o:</strong> ${product.whyChampion}</span>
                `;
                championProductsListDiv.appendChild(div);
            });

            // Preenche as informa√ß√µes essenciais
            essentialInfoList.innerHTML = '';
            marketData.essentialInfo.forEach(info => {
                const li = document.createElement('li');
                li.innerHTML = `<strong>${info.title}:</strong> ${info.content}`;
                essentialInfoList.appendChild(li);
            });
        }

        /**
         * Atualiza o n√≠vel de concorr√™ncia simulada com base no campo de texto de concorrentes.
         */
        function updateCompetitionAnalysis() {
            const competitorsText = competitorsTextarea.value.trim();
            let competitionLevel = 'N√£o Avaliado';

            if (competitorsText.length > 100) {
                competitionLevel = 'Alta';
                simulatedCompetitionLevelSpan.style.color = 'red';
            } else if (competitorsText.length > 20) {
                competitionLevel = 'M√©dia';
                simulatedCompetitionLevelSpan.style.color = 'orange';
            } else if (competitorsText.length > 0) {
                competitionLevel = 'Baixa';
                simulatedCompetitionLevelSpan.style.color = 'green';
            } else {
                 competitionLevel = 'N√£o Informado';
                 simulatedCompetitionLevelSpan.style.color = 'gray';
            }
            simulatedCompetitionLevelSpan.textContent = competitionLevel;
        }

        /**
         * Atualiza a exibi√ß√£o de faturamento do m√™s passado, crescimento e meta batida.
         */
        function updateRevenueDisplay() {
            let currentPlan = null;
            if (currentEditingPlanId) {
                currentPlan = businessPlans.find(p => p.id === currentEditingPlanId);
            }

            const monthlyGoal = parseFloat(monthlyGoalInput.value) || 0;
            const currentMonthRevenue = parseFloat(currentMonthRevenueInput.value) || 0;
            const lastMonthRevenue = currentPlan ? (parseFloat(currentPlan.lastMonthRevenue) || 0) : 0;

            // Exibe faturamento do m√™s passado
            lastMonthRevenueDisplay.textContent = lastMonthRevenue.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

            // Calcula crescimento/queda
            growthOrDeclineDisplay.className = ''; // Limpa classes anteriores
            if (lastMonthRevenue > 0) {
                const change = currentMonthRevenue - lastMonthRevenue;
                const percentageChange = (change / lastMonthRevenue) * 100;
                if (change > 0) {
                    growthOrDeclineDisplay.textContent = `+${percentageChange.toFixed(2)}% ( ${change.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })})`;
                    growthOrDeclineDisplay.classList.add('growth');
                } else if (change < 0) {
                    growthOrDeclineDisplay.textContent = `${percentageChange.toFixed(2)}% ( ${change.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })})`;
                    growthOrDeclineDisplay.classList.add('decline');
                } else {
                    growthOrDeclineDisplay.textContent = '0% (Est√°vel)';
                    growthOrDeclineDisplay.classList.add('neutral');
                }
            } else if (currentMonthRevenue > 0) {
                growthOrDeclineDisplay.textContent = `${currentMonthRevenue.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })} (Primeiro Registro)`;
                growthOrDeclineDisplay.classList.add('growth');
            } else {
                growthOrDeclineDisplay.textContent = 'N/A';
            }

            // Verifica se a meta foi batida
            goalMetDisplay.className = ''; // Limpa classes anteriores
            if (monthlyGoal > 0) {
                if (currentMonthRevenue >= monthlyGoal) {
                    goalMetDisplay.textContent = 'Sim! ÔøΩ';
                    goalMetDisplay.classList.add('goal-met');
                } else {
                    const remaining = monthlyGoal - currentMonthRevenue;
                    goalMetDisplay.textContent = `N√£o (Faltam ${remaining.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })})`;
                    goalMetDisplay.classList.add('goal-not-met');
                }
            } else {
                goalMetDisplay.textContent = 'Meta n√£o definida';
            }
        }


        // --- Fun√ß√£o de Avalia√ß√£o Autom√°tica do Plano ---

        /**
         * Realiza uma avalia√ß√£o simples do plano de neg√≥cio.
         */
        function evaluatePlan() {
            const planName = planNameInput.value.trim();
            const objective = objectiveTextarea.value.trim();
            const strategy = strategyTextarea.value.trim();
            const metrics = metricsTextarea.value.trim();
            const goals = goalsTextarea.value.trim();
            const competitors = competitorsTextarea.value.trim();

            const monthlyGoal = parseFloat(monthlyGoalInput.value) || 0;
            const currentMonthRevenue = parseFloat(currentMonthRevenueInput.value) || 0;


            let feedback = [];

            if (!planName) {
                feedback.push('‚ùó **Nome do Plano:** Por favor, d√™ um nome claro ao seu plano.');
            } else {
                feedback.push('‚úÖ **Nome do Plano:** Bem definido!');
            }

            if (objective.length < 50) {
                feedback.push('‚ö†Ô∏è **Objetivo:** Tente detalhar mais seu objetivo. Seja espec√≠fico sobre o que deseja alcan√ßar.');
            } else {
                feedback.push('‚úÖ **Objetivo:** Bem articulado. Isso √© um √≥timo come√ßo!');
            }

            if (strategy.length < 80) {
                feedback.push('‚ö†Ô∏è **Estrat√©gia:** Sua estrat√©gia precisa ser mais detalhada. Pense em como voc√™ vai realmente executar seus planos.');
            } else {
                feedback.push('‚úÖ **Estrat√©gia:** Parece bem pensada e abrangente.');
            }

            if (metrics.length < 30) {
                feedback.push('‚ö†Ô∏è **M√©tricas:** Como voc√™ vai medir o sucesso? Defina m√©tricas claras para acompanhar seu progresso.');
            } else {
                feedback.push('‚úÖ **M√©tricas:** √ìtimas m√©tricas para acompanhar seu desempenho.');
            }

            if (goals.length < 50) {
                feedback.push('‚ö†Ô∏è **Metas:** Suas metas poderiam ser mais SMART (Espec√≠ficas, Mensur√°veis, Ating√≠veis, Relevantes, Temporiz√°veis).');
            } else {
                feedback.push('‚úÖ **Metas:** Metas claras e inspiradoras. Parab√©ns!');
            }

            if (competitors.length < 20) {
                feedback.push('‚ö†Ô∏è **Concorr√™ncia:** Analise mais seus concorrentes. Quem s√£o eles e o que os torna √∫nicos?');
            } else if (competitors.length > 200) {
                feedback.push('‚úÖ **Concorr√™ncia:** Detalhamento da concorr√™ncia adequado, o que √© √≥timo para o planejamento!');
            } else {
                feedback.push('‚úÖ **Concorr√™ncia:** Sua an√°lise de concorr√™ncia √© boa. Considere detalhar um pouco mais.');
            }

            // Feedback para a nova se√ß√£o de faturamento
            if (monthlyGoal <= 0) {
                feedback.push('‚ö†Ô∏è **Meta de Faturamento:** Defina uma meta de faturamento mensal para acompanhar seu desempenho.');
            } else {
                feedback.push('‚úÖ **Meta de Faturamento:** Meta mensal definida. Bom para o acompanhamento!');
            }
            if (currentMonthRevenue <= 0) {
                feedback.push('‚ö†Ô∏è **Faturamento Atual:** Registre seu faturamento atual para uma avalia√ß√£o completa.');
            } else {
                feedback.push('‚úÖ **Faturamento Atual:** Faturamento registrado. √ìtimo para an√°lise de desempenho.');
            }


            if (feedback.length === 0) {
                feedback.push('üéâ Seu plano parece excelente! Continue com o √≥timo trabalho.');
            } else if (feedback.every(f => f.startsWith('‚úÖ'))) {
                 feedback.unshift('**An√°lise Geral:** Seu plano est√° muito bom e completo!');
            } else if (feedback.every(f => f.startsWith('‚ö†Ô∏è') || f.startsWith('‚ùó'))) {
                feedback.unshift('**An√°lise Geral:** O plano precisa de mais desenvolvimento. Preencha todos os campos com mais detalhes para uma avalia√ß√£o mais precisa!');
            } else {
                feedback.unshift('**An√°lise Geral:** Seu plano tem pontos fortes, mas ainda h√° √°reas para detalhar e aprimorar.');
            }

            evaluationResultDiv.innerHTML = feedback.join('<br>');
            exibirMensagem('Plano avaliado!', 2000);
        }

        /**
         * Gera um relat√≥rio de desempenho e plano de neg√≥cio em uma nova janela.
         */
        function generatePerformanceReport() {
            let reportContent = `
                <!DOCTYPE html>
                <html lang="pt-BR">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Relat√≥rio de Desempenho - Impulso Empreendedor</title>
                    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
                    <style>
                        body { font-family: 'Inter', sans-serif; margin: 20px; color: #333; line-height: 1.6; }
                        h1 { color: rgb(144, 238, 144); text-align: center; margin-bottom: 25px; border-bottom: 2px solid rgb(180, 255, 180); padding-bottom: 10px; }
                        h2 { color: #555; border-bottom: 1px solid #eee; padding-bottom: 5px; margin-top: 30px; }
                        .section-box { background-color: #f9f9f9; border: 1px solid rgb(180, 255, 180); border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
                        p strong { color: rgb(144, 238, 144); }
                        ul { list-style: disc; padding-left: 20px; }
                        ul li { margin-bottom: 5px; }
                        .growth { color: green; font-weight: bold; }
                        .decline { color: red; font-weight: bold; }
                        .neutral { color: orange; font-weight: bold; }
                        .goal-met { color: green; font-weight: bold; }
                        .goal-not-met { color: red; font-weight: bold; }
                        @media print {
                            body { margin: 0; }
                            .section-box { box-shadow: none; border: 1px solid #eee; }
                        }
                    </style>
                </head>
                <body>
                    <h1>Relat√≥rio de Desempenho e Planejamento</h1>
            `;

            let currentPlan = null;
            if (currentEditingPlanId) {
                currentPlan = businessPlans.find(p => p.id === currentEditingPlanId);
            }

            // --- Dados de Faturamento ---
            const monthlyGoal = parseFloat(monthlyGoalInput.value) || 0;
            const currentMonthRevenue = parseFloat(currentMonthRevenueInput.value) || 0;
            const lastMonthRevenue = currentPlan ? (parseFloat(currentPlan.lastMonthRevenue) || 0) : 0;

            let growthText = 'N/A';
            let growthClass = '';
            if (lastMonthRevenue > 0) {
                const change = currentMonthRevenue - lastMonthRevenue;
                const percentageChange = (change / lastMonthRevenue) * 100;
                if (change > 0) {
                    growthText = `+${percentageChange.toFixed(2)}% ( ${change.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })})`;
                    growthClass = 'growth';
                } else if (change < 0) {
                    growthText = `${percentageChange.toFixed(2)}% ( ${change.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })})`;
                    growthClass = 'decline';
                } else {
                    growthText = '0% (Est√°vel)';
                    growthClass = 'neutral';
                }
            } else if (currentMonthRevenue > 0) {
                growthText = `${currentMonthRevenue.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })} (Primeiro Registro)`;
                growthClass = 'growth';
            }

            let goalText = 'Meta n√£o definida';
            let goalClass = '';
            if (monthlyGoal > 0) {
                if (currentMonthRevenue >= monthlyGoal) {
                    goalText = 'Sim! üéâ';
                    goalClass = 'goal-met';
                } else {
                    const remaining = monthlyGoal - currentMonthRevenue;
                    goalText = `N√£o (Faltam ${remaining.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })})`;
                    goalClass = 'goal-not-met';
                }
            }

            reportContent += `
                <div class="section-box">
                    <h2>Dados de Faturamento Mensal</h2>
                    <p><strong>Meta de Faturamento (M√™s Atual):</strong> ${monthlyGoal.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</p>
                    <p><strong>Faturamento do M√™s Atual:</strong> ${currentMonthRevenue.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</p>
                    <p><strong>Faturamento do M√™s Passado:</strong> ${lastMonthRevenue.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</p>
                    <p><strong>Crescimento/Queda:</strong> <span class="${growthClass}">${growthText}</span></p>
                    <p><strong>Meta Batida?:</strong> <span class="${goalClass}">${goalText}</span></p>
                </div>
            `;

            // --- Resumo do Plano de Neg√≥cio ---
            if (currentPlan) {
                reportContent += `
                    <div class="section-box">
                        <h2>Resumo do Plano de Neg√≥cio</h2>
                        <p><strong>Nome do Plano:</strong> ${currentPlan.name}</p>
                        <p><strong>Objetivo:</strong> ${currentPlan.objective || 'N√£o informado.'}</p>
                        <p><strong>Estrat√©gia:</strong> ${currentPlan.strategy || 'N√£o informado.'}</p>
                        <p><strong>M√©tricas:</strong> ${currentPlan.metrics || 'N√£o informado.'}</p>
                        <p><strong>Metas:</strong> ${currentPlan.goals || 'N√£o informado.'}</p>
                        <p><strong>Concorrentes Registrados:</strong> ${currentPlan.competitors || 'N√£o informado.'}</p>
                    </div>
                `;
            } else {
                reportContent += `
                    <div class="section-box">
                        <h2>Resumo do Plano de Neg√≥cio</h2>
                        <p>Nenhum plano de neg√≥cio est√° sendo editado. Crie ou carregue um plano para ver seu resumo aqui.</p>
                    </div>
                `;
            }

            // --- Setores em Destaque (resumo) ---
            const highGrowthSectors = marketData.sectors.filter(s => s.status === 'Alta');
            if (highGrowthSectors.length > 0) {
                reportContent += `
                    <div class="section-box">
                        <h2>Setores em Destaque (Mercado)</h2>
                        <ul>
                `;
                highGrowthSectors.slice(0, 3).forEach(sector => { // Limita a 3 para o relat√≥rio
                    reportContent += `<li><strong>${sector.name}:</strong> ${sector.trend}</li>`;
                });
                reportContent += `
                        </ul>
                        <p>Para uma an√°lise mais detalhada, acesse a se√ß√£o de An√°lise de Mercado na plataforma.</p>
                    </div>
                `;
            }

             // --- An√°lise do Setor Selecionado (se houver) ---
            const selectedSectorNameForReport = sectorSelect.value;
            const selectedSectorForReport = marketData.sectors.find(s => s.name === selectedSectorNameForReport);

            if (selectedSectorForReport) {
                reportContent += `
                    <div class="section-box">
                        <h2>An√°lise Detalhada do Setor: ${selectedSectorForReport.name}</h2>
                        <p><strong>Situa√ß√£o Atual:</strong> ${selectedSectorForReport.status}</p>
                        <p><strong>Tend√™ncia:</strong> ${selectedSectorForReport.trend}</p>
                        <h4>Oportunidades:</h4><ul>`;
                selectedSectorForReport.opportunities.forEach(opp => { reportContent += `<li>${opp}</li>`; });
                reportContent += `</ul><h4>Desafios:</h4><ul>`;
                selectedSectorForReport.challenges.forEach(chal => { reportContent += `<li>${chal}</li>`; });
                reportContent += `</ul><h4>Fatores Chave de Sucesso:</h4><ul>`;
                selectedSectorForReport.keySuccessFactors.forEach(factor => { reportContent += `<li>${factor}</li>`; });
                reportContent += `</ul><h4>Recomenda√ß√£o Estrat√©gica:</h4><p>${selectedSectorForReport.recommendation}</p></div>`; // Inclui a recomenda√ß√£o no relat√≥rio
            }


            // --- Informa√ß√µes Essenciais (resumo) ---
            if (marketData.essentialInfo.length > 0) {
                reportContent += `
                    <div class="section-box">
                        <h2>Informa√ß√µes Essenciais para o Empreendedor</h2>
                        <ul>
                `;
                marketData.essentialInfo.slice(0, 2).forEach(info => { // Limita a 2 para o relat√≥rio
                    reportContent += `<li><strong>${info.title}:</strong> ${info.content.substring(0, 100)}...</li>`; // Pequeno resumo
                });
                reportContent += `
                        </ul>
                        <p>Explore todos os recursos e informa√ß√µes na se√ß√£o "Recursos e Informa√ß√µes Essenciais".</p>
                    </div>
                `;
            }


            reportContent += `
                </body>
                </html>
            `;

            const reportWindow = window.open('', '_blank', 'width=800,height=700,scrollbars=yes');
            if (reportWindow) {
                reportWindow.document.write(reportContent);
                reportWindow.document.close(); // Fecha o documento para que o navegador comece a renderizar
                reportWindow.focus();
                // Adiciona um pequeno delay para garantir que o conte√∫do foi renderizado antes de imprimir
                setTimeout(() => {
                    reportWindow.print();
                    // reportWindow.close(); // Opcional: fechar a janela ap√≥s a impress√£o
                }, 500); // Meio segundo de delay
            } else {
                exibirMensagem('N√£o foi poss√≠vel abrir a janela do relat√≥rio. Verifique se pop-ups est√£o bloqueados.', 5000);
            }
        }


        // --- Inicializa√ß√£o e Event Listeners ---

        document.addEventListener('DOMContentLoaded', () => {
            loadPlans(); // Carrega os planos ao iniciar a p√°gina
            populateSectorDropdown(); // Preenche o dropdown de setores
            displayMarketAnalysis(); // Exibe os dados de mercado e os novos conte√∫dos
            clearEditor(); // Garante que o editor esteja limpo ao carregar
        });

        savePlanBtn.addEventListener('click', savePlan);
        newPlanBtn.addEventListener('click', clearEditor);
        deletePlanBtn.addEventListener('click', (e) => {
            if (currentEditingPlanId) {
                deletePlan(currentEditingPlanId, e);
            } else {
                exibirMensagem('Nenhum plano selecionado para exclus√£o.', 2000);
            }
        });
        exportPdfBtn.addEventListener('click', exportPlanAsPdf);
        evaluatePlanBtn.addEventListener('click', evaluatePlan);
        competitorsTextarea.addEventListener('input', updateCompetitionAnalysis);

        // Event listeners para a nova se√ß√£o de faturamento
        monthlyGoalInput.addEventListener('input', updateRevenueDisplay);
        currentMonthRevenueInput.addEventListener('input', updateRevenueDisplay);
        updateRevenueBtn.addEventListener('click', () => {
             if (currentEditingPlanId) {
                 savePlan(); // Salva os dados de faturamento ao clicar em "Atualizar Dados"
                 exibirMensagem('Dados de faturamento atualizados!', 2000);
             } else {
                 exibirMensagem('Selecione ou crie um plano para atualizar o faturamento!', 2500);
             }
        });
        generateReportBtn.addEventListener('click', generatePerformanceReport); // Evento para o novo bot√£o de relat√≥rio

        // Event listener para o dropdown de setores
        sectorSelect.addEventListener('change', displayDetailedSectorAnalysis);


        // JavaScript para rolagem suave ao clicar nos bot√µes CTA (mantido para consist√™ncia)
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();

                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId === '#topo' ? 'body' : targetId);

                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop,
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
</body>
</html>
ÔøΩ